# Bike Store Database Analysis

This project involves creating and managing a database for a fictional Bike Store and performing a variety of data analyses using SQL. The database schema includes tables for storing information about brands, categories, customers, orders, products, staffs, stocks, and stores. Various SQL queries are then executed to derive insights regarding sales, customer behavior, product performance, and staff/store performance.

## Table of Contents
- Project Description
- Database Schema
- Setup and Data Loading
- Key Queries
  - Sales Analysis
  - Customer Insights
  - Product Performance
  - Inventory Management
  - Staff and Store Performance
  - Customer Retention
- Conclusion

## Project Description

The goal of this project is to build a structured SQL database for a Bike Store and perform analytical queries on it. The database includes tables representing various entities such as products, orders, customers, stores, etc. Using these tables, SQL queries are run to extract valuable business insights such as sales trends, product performance, and customer behavior.

## Database Schema

The schema contains the following tables:
- **Brands**: Stores details about bike brands.
- **Categories**: Stores product category details.
- **Customers**: Stores customer information.
- **Order_items**: Stores details of the items ordered.
- **Orders**: Stores order details such as order dates and status.
- **Products**: Stores product details like brand, category, and pricing.
- **Staffs**: Stores information about staff members.
- **Stocks**: Stores stock levels of products across stores.
- **Stores**: Stores store information such as location and contact details.

## Setup and Data Loading

1. **Create Database**: The Bike Store database is created using MySQL.
    ```sql
    CREATE DATABASE Bike_Store;
    USE Bike_Store;
    ```

2. **Create Tables**: Tables are created for each entity (Brands, Categories, Customers, Order_items, Orders, Products, Staffs, Stocks, Stores) with appropriate fields and data types.

3. **Load Data**: Data is imported into these tables from CSV files using the `LOAD DATA INFILE` command.
    ```sql
    LOAD DATA INFILE 'C:/ProgramData/MySQL/MySQL Server 8.0/Uploads/brands.csv' INTO TABLE Brands FIELDS TERMINATED BY ',' IGNORE 1 LINES;
    ```

## Key Queries

### 1. Sales Analysis
- **A. Total sales amount for each product in a given year**:
    ```sql
    SELECT 
        p.product_id, p.product_name, YEAR(o.order_date) AS year,
        SUM(oi.quantity * (oi.list_price - (oi.list_price * oi.discount / 100))) AS total_sales_amount
    FROM 
        Order_items oi
    JOIN 
        Products p ON oi.product_id = p.product_id
    JOIN 
        Orders o ON oi.order_id = o.order_id
    GROUP BY 
        year, p.product_id, p.product_name
    ORDER BY 
        year, total_sales_amount DESC;
    ```
    - This query calculates the total sales amount, considering discounts, for each product across different years.
![image](https://github.com/user-attachments/assets/e465102e-22ab-4b2d-9224-ecc8d18fe2f6)


- **B. Top-selling products by quantity**:
    ```sql
    SELECT 
        p.product_id, p.product_name, SUM(oi.quantity) total_quantity
    FROM 
        order_items oi
    JOIN 
        products p ON oi.product_id = p.product_id
    GROUP BY 
        p.product_id, p.product_name
    ORDER BY 
        total_quantity DESC
    LIMIT 10;
    ```
    - This query returns the top 10 best-selling products based on total quantity sold.
![image](https://github.com/user-attachments/assets/3cf0b360-670a-4ccf-acaf-3b11875e8039)


- **C. Monthly sales trends across categories**:
    ```sql
    SELECT 
        c.category_name, YEAR(o.order_date) AS year, MONTH(o.order_date) AS month,
        SUM(oi.quantity * (oi.list_price - (oi.list_price * oi.discount / 100))) AS total_sales_amount
    FROM 
        Order_items oi
    JOIN 
        products p ON p.product_id = oi.product_id
    JOIN 
        categories c ON c.category_id = p.category_id
    JOIN 
        Orders o ON oi.order_id = o.order_id
    GROUP BY 
        c.category_name, year, month
    ORDER BY 
        year, month, total_sales_amount DESC;
    ```
    - This query shows sales trends by month for different product categories.  
![image](https://github.com/user-attachments/assets/fcb0ef84-a265-4b4f-a91f-59dcf9efe56b)


### 2. Customer Insights
- **A. Orders and revenue generated by each customer**:
    ```sql
    SELECT 
        c.Customer_id, 
        CONCAT(c.first_name,' ',c.last_name) AS customer_name, 
        COUNT(o.order_id) AS total_orders,
        SUM(oi.quantity * (oi.list_price - (oi.list_price * oi.discount / 100))) AS total_revenue
    FROM 
        customers c
    JOIN 
        orders o ON o.customer_id = c.customer_id
    JOIN 
        Order_items oi ON o.order_id = oi.order_id
    GROUP BY 
        c.Customer_id, customer_name
    ORDER BY 
        total_revenue DESC;
    ```
    - This query provides details on how many orders each customer has placed and the total revenue generated.
![image](https://github.com/user-attachments/assets/75c9a5c6-483f-40ff-93a6-2b7e98bc47a4)


- **B. Top cities by number of orders**:
    ```sql
    SELECT 
        c.city, COUNT(o.order_id) AS total_orders
    FROM 
        customers c
    JOIN
        orders o ON o.customer_id = c.customer_id
    GROUP BY
        c.city
    ORDER BY
        total_orders DESC
    LIMIT 10;
    ```
    - These queries display the citieswith the most orders.  
![image](https://github.com/user-attachments/assets/a24db76e-6e54-4214-925f-efb4dd1a8a65)


- **C. Top states by number of orders**:
    ```sql
    SELECT 
        c.state, COUNT(o.order_id) AS total_orders
    FROM 
        customers c
    JOIN
        orders o ON o.customer_id = c.customer_id
    GROUP BY
        c.state
    ORDER BY
        total_orders DESC;
    ```
    - These queries display the states with the most orders.  
![image](https://github.com/user-attachments/assets/4e08f066-9907-40e6-bae6-189258e91337)


- **D. Customers with no orders in the past year**:
    ```sql
    SELECT 
        c.Customer_id, 
        CONCAT(c.first_name,' ',c.last_name) AS customer_name, 
        c.email,
        c.city,
        c.state
    FROM 
        customers c
    LEFT JOIN 
        orders o ON o.customer_id = c.customer_id
    WHERE 
        YEAR(o.order_date) = 2018
    GROUP BY 
        c.Customer_id, customer_name, c.email, c.city, c.state
    HAVING
        COUNT(o.order_id) = 0;
    ```
    - Identifies customers who have not placed any orders in the last year.  
![image](https://github.com/user-attachments/assets/f7c86a6a-0403-4bbb-9341-f60a7b359ed4)


### 3. Product Performance
- **A. Most popular product categories by sales volume**:
    ```sql
    SELECT 
        c.category_id, c.category_name, SUM(oi.quantity) as Sales_volume
    FROM
        categories c
    JOIN
        products p ON c.category_id = p.category_id
    JOIN 
        order_items oi ON oi.product_id = p.product_id
    GROUP BY
        c.category_id, c.category_name
    ORDER BY
        Sales_volume DESC
    LIMIT 1;
    ```
    - Returns the top product categories by sales volume.  
![image](https://github.com/user-attachments/assets/cf21b072-4a10-414c-a9a1-d33e474b317c)


- **B. Least popular product categories by sales volume**:
    ```sql
    SELECT 
        c.category_id, c.category_name, SUM(oi.quantity) as Sales_volume
    FROM
        categories c
    JOIN
        products p ON c.category_id = p.category_id
    JOIN 
        order_items oi ON oi.product_id = p.product_id
    GROUP BY
        c.category_id, c.category_name
    ORDER BY
        Sales_volume 
    LIMIT 1;
    ```
    - Returns the product categories with the lowest sales volume.  
![image](https://github.com/user-attachments/assets/daa551dd-4e47-4f47-aed4-528203c78893)


- **C. Product sales performance across different brands**:
    ```sql
    SELECT 
        b.brand_id, b.brand_name,
        SUM(oi.quantity * (oi.list_price - (oi.list_price * oi.discount / 100))) AS total_sales_amount,
        SUM(oi.quantity) AS total_quantity_sold
    FROM 
        brands b
    JOIN
        products p ON p.brand_id = b.brand_id
    JOIN
        order_items oi ON oi.product_id = p.product_id
    GROUP BY 
        b.brand_id, b.brand_name
    ORDER BY
        total_sales_amount DESC;
    ```
    - Compares sales performance across different brands in terms of revenue and quantity sold.  
![image](https://github.com/user-attachments/assets/b1ecbba1-8834-4e6d-8713-70f7960c4345)


- **D. Average discount provided on each product**:
    ```sql
    SELECT
        p.product_id, p.product_name, 
        AVG(oi.discount) AS avg_discount
    FROM
        products p
    LEFT JOIN
        order_items oi ON oi.product_id = p.product_id
    GROUP BY
        p.product_id, p.product_name
    ORDER BY
        avg_discount DESC;
    ```
    - Shows the average discount provided for each product across all orders.  
![image](https://github.com/user-attachments/assets/967222eb-1538-4053-a4bd-e316275474f2)


### 4. Inventory Management
- **A. Stores with the highest stock quantities for each product**:
    ```sql
    SELECT 
        s.store_id, s.store_name, p.product_id, p.product_name,
        st.quantity AS stock_quantity
    FROM 
        Stocks st
    JOIN 
        Products p ON st.product_id = p.product_id
    JOIN 
        Stores s ON st.store_id = s.store_id
    ORDER BY 
        p.product_id, st.quantity DESC;
    ```
    - This query shows which stores have the highest stock levels for each product.  
![image](https://github.com/user-attachments/assets/ebcc757f-8731-4412-9105-318d9b5764b7)


- **B. Stores with the lowest stock quantities for each product**:  
    ```sql
    SELECT 
        s.store_id, s.store_name, p.product_id, p.product_name,
        st.quantity AS stock_quantity
    FROM 
        Stocks st
    JOIN 
        Products p ON st.product_id = p.product_id
    JOIN 
        Stores s ON st.store_id = s.store_id
    ORDER BY 
        p.product_id, st.quantity;
    ```
    - This query shows which stores have the lowest stock levels for each product.  
![image](https://github.com/user-attachments/assets/ccee2345-cebb-400a-8c33-746a0691e8ef)


- **C. Products that are low in stock across all stores**:


    ```sql
    SELECT 
        p.product_id, p.product_name, SUM(st.quantity) AS total_stock
    FROM 
        Products p
    JOIN 
        Stocks st ON st.product_id = p.product_id
    GROUP BY 
        p.product_id, p.product_name
    HAVING 
        total_stock < 10
    ORDER BY 
        total_stock ASC;
    ```
    - Identifies products that are running low in stock across all stores.  
![image](https://github.com/user-attachments/assets/7cf088bd-0c0f-4ad6-847f-b700378371ea)


### 5. Staff and Store Performance
- **A. Store with the highest number of orders and total revenue**: 
    ```sql
    SELECT 
        s.store_id, s.store_name, COUNT(o.order_id) AS total_orders,
        SUM(oi.quantity * (oi.list_price - (oi.list_price * oi.discount / 100))) AS total_revenue
    FROM 
        Orders o
    JOIN 
        Order_items oi ON oi.order_id = o.order_id
    JOIN 
        Stores s ON o.store_id = s.store_id
    GROUP BY 
        s.store_id, s.store_name
    ORDER BY 
        total_revenue DESC
    LIMIT 1;
    ```
    - Determines which store has the highest number of orders and generated the most revenue.  
![image](https://github.com/user-attachments/assets/d89269cb-cace-46c2-bd47-09facde46a2b)


- **B. Total sales generated by each staff member**:
    ```sql
    SELECT 
        st.staff_id, CONCAT(st.first_name,' ',st.last_name) AS staff_name,
        SUM(oi.quantity * (oi.list_price - (oi.list_price * oi.discount / 100))) AS total_sales_amount
    FROM 
        Staffs st
    JOIN 
        Orders o ON st.staff_id = o.staff_id
    JOIN 
        Order_items oi ON oi.order_id = o.order_id
    GROUP BY 
        st.staff_id, staff_name
    ORDER BY 
        total_sales_amount DESC;
    ```
    - Shows the total sales generated by each staff member.  
![image](https://github.com/user-attachments/assets/13c56633-1a27-4f53-961f-f6f74c87480f)


- **C. Staff performance across different stores**:
    ```sql
    SELECT 
        st.staff_id, CONCAT(st.first_name,' ',st.last_name) AS staff_name, 
        s.store_id, s.store_name,
        SUM(oi.quantity * (oi.list_price - (oi.list_price * oi.discount / 100))) AS total_sales_amount
    FROM 
        Staffs st
    JOIN 
        Orders o ON st.staff_id = o.staff_id
    JOIN 
        Order_items oi ON oi.order_id = o.order_id
    JOIN 
        Stores s ON o.store_id = s.store_id
    GROUP BY 
        st.staff_id, staff_name, s.store_id, s.store_name
    ORDER BY 
        total_sales_amount DESC;
    ```
    - Compares the sales performance of staff members across different stores.  
![image](https://github.com/user-attachments/assets/77b90ea1-b02d-4026-a7bb-e8b0b04bd6de)


### 6. Customer Retention
- **A. Customers who placed more than one order within the last year**:
    ```sql
    SELECT 
        c.Customer_id, 
        CONCAT(c.first_name,' ',c.last_name) AS customer_name, 
        COUNT(o.order_id) AS total_orders
    FROM 
        Customers c
    JOIN 
        Orders o ON c.customer_id = o.customer_id
    WHERE 
        YEAR(o.order_date) = 2019
    GROUP BY 
        c.Customer_id, customer_name
    HAVING 
        total_orders > 1;
    ```
    - Returns the count of customers who placed multiple orders in the last year.  
![image](https://github.com/user-attachments/assets/bb1b6727-e0a2-4aaa-9a2e-08662083fb2c)


## Conclusion

This project demonstrates the power of SQL for data analysis and management. By creating and querying a comprehensive database for the Bike Store, we can gain valuable insights into sales, customer behavior, product performance, and store operations. These insights can help the business optimize its operations, improve inventory management, and enhance customer satisfaction.


# 📩 Feedback
If you have any feedback, please reach out to me at Linkedin: https://www.linkedin.com/in/vineet-patel416/
